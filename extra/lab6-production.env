# Lab 6: Production Environment Configuration
# Enterprise environment variables for TechCorp Customer Service AI

# === Application Configuration ===
APP_NAME=techcorp-customer-service-ai
APP_VERSION=1.0.0
APP_ENV=production
APP_MODE=dashboard

# Server Configuration
PORT=8501
HOST=0.0.0.0
WORKERS=1

# === Security Configuration ===
# JWT Secret (CHANGE THIS IN PRODUCTION)
JWT_SECRET_KEY=CHANGE_THIS_IN_PRODUCTION_USE_STRONG_32_CHAR_KEY
JWT_ALGORITHM=HS256
JWT_EXPIRY=3600
SESSION_TIMEOUT=86400

# Auth Service Configuration
AUTH_ENABLED=true
AUTH_PROVIDER=internal
REQUIRE_MFA=false

# API Security
API_RATE_LIMIT=100
API_RATE_WINDOW=60
CORS_ORIGINS=*
ALLOWED_HOSTS=localhost,127.0.0.1,*.techcorp.com

# === Database Configuration ===
# Vector Database (ChromaDB)
CHROMA_DB_PATH=/app/data/chroma_db
CHROMA_PERSIST=true
CHROMA_COLLECTION_NAME=enterprise_knowledge

# Application Database (if using external)
# DATABASE_URL=postgresql://user:password@localhost:5432/techcorp_ai
# DB_POOL_SIZE=10
# DB_MAX_OVERFLOW=20
# DB_POOL_TIMEOUT=30

# === Model Configuration ===
# Ollama Configuration
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2
OLLAMA_TIMEOUT=30
OLLAMA_KEEP_ALIVE=5m

# Embedding Model
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_DEVICE=cpu
EMBEDDING_CACHE_SIZE=100

# === Logging Configuration ===
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_ROTATION=daily
LOG_RETENTION=30

# Security Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=/app/logs/security_audit.log

# Performance Logging
PERFORMANCE_LOG_ENABLED=true
PERFORMANCE_LOG_FILE=/app/logs/performance.log

# === Monitoring Configuration ===
# Health Checks
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_PATH=/health

# Metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics
METRICS_RETENTION=7d

# Prometheus Configuration
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/app/metrics

# OpenTelemetry Tracing
OTEL_ENABLED=false
OTEL_ENDPOINT=http://jaeger:14268/api/traces
OTEL_SERVICE_NAME=techcorp-customer-service-ai
OTEL_SAMPLING_RATIO=0.1

# === Performance Configuration ===
# Application Performance
MAX_WORKERS=4
WORKER_TIMEOUT=300
KEEP_ALIVE=2
MAX_CONNECTIONS=1000

# Memory Management
MEMORY_LIMIT=1Gi
MEMORY_REQUEST=512Mi

# CPU Management  
CPU_LIMIT=1.0
CPU_REQUEST=0.5

# Cache Configuration
CACHE_ENABLED=true
CACHE_TYPE=memory
CACHE_TTL=300
CACHE_MAX_SIZE=1000

# === Feature Flags ===
# RAG Features
RAG_ENABLED=true
RAG_MAX_RESULTS=5
RAG_RELEVANCE_THRESHOLD=0.7
RAG_RERANK_ENABLED=false

# MCP Features
MCP_ENABLED=true
MCP_SERVICE_DISCOVERY=true
MCP_CIRCUIT_BREAKER=true
MCP_RETRY_ATTEMPTS=3

# Dashboard Features
DASHBOARD_AUTO_REFRESH=true
DASHBOARD_REFRESH_INTERVAL=30
DASHBOARD_REAL_TIME_UPDATES=true
DASHBOARD_EXPORT_ENABLED=true

# Analytics Features
ANALYTICS_ENABLED=true
ANALYTICS_RETENTION_DAYS=90
ANALYTICS_AGGREGATION_INTERVAL=300

# === Integration Configuration ===
# External Services
EXTERNAL_API_TIMEOUT=30
EXTERNAL_API_RETRIES=3
EXTERNAL_API_BACKOFF=exponential

# Service Discovery
SERVICE_REGISTRY_ENABLED=true
SERVICE_REGISTRY_URL=consul://localhost:8500
SERVICE_REGISTRY_TTL=30

# Message Queue (if using)
# REDIS_URL=redis://localhost:6379/0
# REDIS_PASSWORD=
# REDIS_DB=0
# REDIS_POOL_SIZE=10

# === Storage Configuration ===
# File Storage
DATA_DIR=/app/data
TEMP_DIR=/app/temp
LOG_DIR=/app/logs
UPLOAD_MAX_SIZE=10MB
UPLOAD_ALLOWED_TYPES=txt,pdf,md,json

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION=30d
BACKUP_LOCATION=/app/backups

# === Notification Configuration ===
# Email (if needed)
SMTP_ENABLED=false
SMTP_HOST=smtp.techcorp.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true

# Slack (if needed)
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=
SLACK_CHANNEL=#alerts

# === Development & Debugging ===
# Debug Mode (DISABLE IN PRODUCTION)
DEBUG=false
DEBUG_TOOLBAR=false
PROFILING_ENABLED=false

# Testing
TEST_MODE=false
MOCK_EXTERNAL_SERVICES=false

# === Compliance & Governance ===
# Data Privacy
GDPR_ENABLED=true
DATA_RETENTION_DAYS=2555  # 7 years
PERSONAL_DATA_ENCRYPTION=true
DATA_ANONYMIZATION=true

# Audit & Compliance
AUDIT_TRAIL_ENABLED=true
COMPLIANCE_MODE=SOC2
DATA_LINEAGE_TRACKING=true

# Security Headers
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
CSP_ENABLED=true
X_FRAME_OPTIONS=DENY

# === Resource Limits ===
# Application Limits
MAX_REQUEST_SIZE=10MB
MAX_RESPONSE_SIZE=50MB
REQUEST_TIMEOUT=300
CONNECTION_TIMEOUT=60

# Rate Limiting
GLOBAL_RATE_LIMIT=1000
USER_RATE_LIMIT=100
IP_RATE_LIMIT=500

# === Deployment Configuration ===
# Container Configuration
CONTAINER_NAME=techcorp-customer-service-ai
CONTAINER_RESTART_POLICY=always
CONTAINER_MEMORY_LIMIT=1g
CONTAINER_CPU_LIMIT=1.0

# Kubernetes Configuration (if using)
K8S_NAMESPACE=techcorp-ai
K8S_DEPLOYMENT_NAME=customer-service-ai
K8S_SERVICE_NAME=customer-service-ai-svc
K8S_REPLICAS=3

# Load Balancer
LB_ALGORITHM=round_robin
LB_HEALTH_CHECK=true
LB_STICKY_SESSIONS=false

# === Environment Specific Overrides ===
# These can be overridden per environment (dev/staging/prod)

# Development Overrides
# LOG_LEVEL=DEBUG
# DEBUG=true
# CACHE_ENABLED=false

# Staging Overrides  
# APP_ENV=staging
# LOG_LEVEL=DEBUG
# METRICS_RETENTION=3d

# Production Overrides
# APP_ENV=production
# LOG_LEVEL=WARN
# CACHE_TTL=600
# WORKER_TIMEOUT=600